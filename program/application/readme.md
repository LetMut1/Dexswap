Для выполнения технического задания не обязательно было создавть сущность, хранящую дополнительные управляющие данные, и достаточно было реализовать метод swap(...), но для демонстрации понимания основ построения контрактов на Солане я увеличил количество кода, и была введена сущность Intermediary.

Чтобы на стороне нашего контракта была возможность определять доступность Пула, необходимо было повторить реализацию логики доступности Пула, реализованную на стороне контракта Декса.
Соответственно, стояла задача внедрения кода с крейтов Дексов, но, к сожалению, прямое подключение крейтов приводило ко множественным ошибкам зависимостей. (Если быть точным, то существовала возможность прямого подключения набора крейтов лишь для 1 любого Декса, но для этого было необходиом понизить версию SolanaProgram.
Так же можно было сделать Гит-форки крейтов Дексов и повысить версии используемых внутри крейтов, чтобы обеспечить дальнейшую совместимость при внедрении.
Я выбрал вариант копирования необходиомго кода из крейтов Декса (разумеется, с соблюдением лэйаута структур и формата их сериализации)